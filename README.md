# Тестовое задание (18.09.2017)
Библиотека, реализующая средства индексации текстовых файлов по словам. <br/>
Функционал решения:
* строит поисковый индекс по заданным файлам и каталогам;
* позволяет добавлять в индекс и удалять из индекса файлы и каталоги;
* позволяет осуществлять поиск файлов по индексу заданного слова целиком (whole word), по префиксу, с учётом регистра (case sensetive) и без;
* осуществляет мониторинг за изменениями добавленных в индекс файлов и каталогов и оперативно актуализирует индекс в соответствии с этими изменениями.
Вместе с библиотекой поставляется небольшое десктопное приложение, позволяющее использовать все возможности библиотеки.

## О реализации
* Поисковый индекс представляет собой обратный индекс, т.е. соответствие `"слово" — "набор файлов, в которых это слово встречается"`. В качестве основной структуры данных используется префиксное дерево. Это обеспечивает ожидаемое время поиска пропорциональным длине поискового запроса.
* Для быстрого удаления файла из индекса строится прямой индекс (обратный к поисковому) по соответствию `"файл" — "множество слов из этого файла"`. Это необходимо, т.к. при удалении файла из файловой системы, из индекса он удаляется постфактум (по событию), а значит у нас нет списка ключей, которые нужно удалить из индекса. Прямой индекс предоставляет такой список.
* Наименьшей единицей индексации выбран файл (см. раздел Допущения).
* Процесс актуализации индекса происходит в фоне. Инициируется по таймеру с определённым интервалом. Задачи на актуализацию забираются из очереди, в которую попадают по событию изменения файла. Несколько задач на изменение одного и того же файлов в рамках одной сессии актуализации индексации сливаются в одну задачу. Это необходимо, чтобы избежать лишних переиндексаций файла в случае частых изменений.

## Допущения
* Наилучшим образом система будет работать для относительно небольших файлов (условно, не больше 1 MБ). Для файлов относительно большого объёма система будет работать, однако переиндексация может занимать значительное время. Количество файлов для скорости поиска значения не имеет.
* Цена за поддержание прямого индекса: увеличение потребления памяти, необходимой для хранения этого индекса и процессорное время на его построение. Построение прямого индекса можно отключить. Тогда удаление из индекса будет работать посредством практически полного сканирования поискового индекса. Это опция оптимальная для ситуаций, когда удаления из файлов не ожидаются.

## Что можно улучшить и куда двигаться дальше?
* Персистентность. Для быстрого сохранения индекса на диск и загрузки с диска может потребоваться реорганизация физического представляения префиксного дерева в памяти: перейти от space-spare структуры к хранению в двух массивах (т.н. double-array trie). Либо без реорганизации, с помощью рекурсивной сериализации узлов.
*
